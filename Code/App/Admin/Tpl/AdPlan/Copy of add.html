<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0047)http://adu.phpad.cn/admin.php?m=plan&a=plan_add -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title></title>
<link type="text/css" href="STATIC_URL/admin/css/admin.css" rel="stylesheet">
<script type="text/javascript" src="STATIC_URL/admin/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="STATIC_URL/admin/js/formvalidator.js"></script>
<script type="text/javascript" src="STATIC_URL/admin/js/formvalidatorregex.js"></script>
<script type="text/javascript" src="STATIC_URL/admin/js/calendar.js"></script>
<link href="./admin.php_files/calendar-blue.css" rel="stylesheet" type="text/css">
</head>
<body>

 <div class="main">
   <div class="body_title">新增计划</div>
		<div class="listmain setting">
		
<form method="post" action="SITE_URL?m=AdPlan&a=addCheck" enctype="multipart/form-data">
<table align="center" class="list" width="95%" cellspacing="0">
    <tbody><tr>
    	<td style="width:120px"><em class="red">*</em>计划名称：</td>
    	<td class="textbox_td">
    		<input class="" type="text" name="plan_name">
    		<div class="onShow">请填写正确的计划名称，计划名称不能为空</div>				
    	</td>
    </tr>
    <tr>
    	<td style="width:120px"><em class="red">*</em>广告主UID：</td>
    	<td class="textbox_td">
    		<input class="" type="text" name="uid">
    		<div class="onShow">请填写正确的广告主ID，广告主ID不能为空</div>				
    	</td>
    </tr>
    <tr>
    	<td><em class="red">&nbsp;</em>接入网址：</td>
    	<td class="textbox_td">
    	    <input class="newsite_textw160" type="text" name="track_url">
    	    <div class="onShow">跳转的入口地址，方便记录访问信息</div>	
    	</td>
    </tr>
    <tr>
        <td class="w155"><em class="red">*</em>目标网址：</td>
		<td class="textbox_td">
		    <input class="" type="text" name="jump_url" value="http://">
		    <div class="onShow">请填写正确的目标网址 ，目标网址不能为空</div>				
	    </td>
	</tr>
	<tr>
    	<td class="w155"><em class="red">*</em>LOGO：</td>
    	<td class="textbox_td">
    		<input class="newsite_textw160" type="file" name="plan_logo"></td>
    </tr>
    <tr>
		<td><em class="red">*</em>行业类别：</td>
		<td class="textbox_td">
		    <select name="category_id">
		    <volist name="industryInfo" id="vo">
		    	 <option value="{$vo.id}">{$vo.name}</option>
		    </volist>
		    </select>	
		</td>
	 </tr>	
	 <tr>
		<td><em class="red">*</em>计费形式：</td>
		<td class="textbox_td">
			<select class="newsite_select" name="pay_type">
				<option value="1">cps</option>
				<option value="2">cpa</option>
				<option value="3">cpc</option>
				<option value="4">cpm</option>
            </select>
		</td>
	</tr>
	<tr>
		<td><em class="red">*</em>审核方式：</td>
		<td>
			<input type="radio" name="plan_check" value="0" checked="checked">自动审核	
			<input type="radio" name="plan_check" value="1">手动审核		
		</td>
	</tr>
	<tr>
		<td><em class="red">*</em>结算周期：</td>
		<td class="textbox_td">
		    <input type="radio" name="clearing_form" value="1">日结					
			<input type="radio" name="clearing_form" value="2">周结
			<input type="radio" name="clearing_form" value="3" checked="checked">月结					
		</td>
	</tr>
    <tr>
    	<td><em class="red">*</em>计划周期：</td>
    	<td class="textbox_td">
    		开始时间：<input type="text" name="start_date" id="start_date" class="input_text" size="12" value="2013-11-27">
    		<script>
                    Calendar.setup({
                        inputField     :    "start_date",
                        ifFormat       :    "%Y-%m-%d",
                    });
             </script>
             - 结束时间：<input type="text" name="end_date" id="end_date" class="input_text" size="12" value="">
    		<script>
                    Calendar.setup({
                        inputField     :    "end_date",
                        ifFormat       :    "%Y-%m-%d",
                    });
             </script>
             <div class="onShow">请填写计划周期的开始时间、结束时间，计划周期时间不能为空</div>	
    	</td>
    </tr>	
    <tr>
        <td><em class="red">*</em>报文转发：</td>
        <td class="textbox_td">
            <input type="radio" name="is_transmit" value="0" checked="checked"> 否
            <input type="radio" name="is_transmit" value="1"> 是
            <div class="onShow">表单类广告将表单数据转发</div>	
        </td>
    </tr>
    <tr>
        <td><em class="red">*</em>联盟计算佣金：</td>
        <td class="textbox_td">
            <input type="radio" name="union_cal" value="0" checked="checked"> 否
            <input type="radio" name="union_cal" value="1"> 是
            <div class="onShow">由联盟计算具体佣金</div>	
        </td>
    </tr>
    </tbody><tbody id="cps" class="price">
          <tr>
              <td><em class="red">*</em>数据返回机制：</td>
              <td class="textbox_td">
                  <input type="radio" name="cps_data_return" value="0" onclick="returnDate1(&#39;cps&#39;)" checked="checked">实时返回
                  <input type="radio" name="cps_data_return" value="1" onclick="returnDate2(&#39;cps&#39;)">延时返回
                  <span style="display:none" id="cps_return_date_span">
                      延时 <input type="text" name="cps_data_return" style="width:20px" value="0"> 天
                  </span>
              </td>
          </tr>
          <tr>
              <td><em class="red">*</em>效果认定期：</td>
              <td class="textbox_td">
                  <input type="text" name="cps_return_day" style="width:30px"> 天
                  <div class="onShow">广告主对联盟会员营销效果的一种评测期限</div>	
              </td>
          </tr>         
          <tr>
        	<td><em class="red">*</em>费用设置：</td>
        	<td class="textbox_td">
        		<table style="width:99%;margin:5px auto;text-align:center" id="price_area">
        		    <tbody><tr style="height:27px"><th><em class="red">*</em>类目标识</th><th><em class="red">*</em>类目名称</th><th><em class="red">*</em>佣金比率</th><th>佣金说明</th><th>操作</th></tr>
        		    <tr class="cps_price_tr">
        		        <td style="width:20%"><input type="text" name="cps_category_id[]"></td>
        		        <td style="width:20%"><input type="text" name="cps_category_name[]"></td>
        		        <td style="width:20%"><input type="text" name="cps_real_price[]" style="width:50px"> %</td>
        		        <td style="width:20%"><input type="text" name="cps_remark[]"></td>
        		        <td style="width:20%">
        		            <input type="hidden" name="is_step[]" value="0">
        		            <a class="add_price">添加一项 </a>|
        		            <a class="add_step">阶梯价格</a>|
        		            <a class="remove_price">移除</a>
        		        </td>
        		    </tr>      		    
        		</tbody></table>
        	</td>
          </tr>	
	</tbody>
	<tbody id="cpa" class="price" style="display:none;">
			  <tr>
			      <td>数据返回机制：</td>
			      <td class="textbox_td">
			          <input type="radio" name="cpa_data_return" value="1" onclick="returnDate1(&#39;cpa&#39;)">实时返回
			          <input type="radio" name="cpa_data_return" value="2" onclick="returnDate2(&#39;cpa&#39;)">延时返回
			          <span style="display:none" id="cpa_return_date_span">
			              延时 <input type="text" name="cpa_data_return" style="width:20px" value="0"> 天
			          </span>
			      </td>
			  </tr>
			  <tr>
			      <td>效果认定期：</td>
			      <td class="textbox_td">
			          <input type="text" name="cpa_return_day" style="width:30px"> 天
			      </td>
			  </tr>
			  <tr>
				<td>价格：</td>
				<td class="textbox_td">
					<input class="newsite_textw160" type="text" name="cpa_price">	
				</td>
			  </tr>	
			  <tr>
				<td>价格描述：</td>
				<td class="textbox_td">
					<input class="newsite_textw160" type="text" name="cpa_price_desc">	
				</td>
			  </tr>	
			  </tbody>
			  
			  <tbody id="cpm" class="price" style="display:none;">
			  <tr>
				<td>千次价格：</td>
				<td class="textbox_td">
					<input class="newsite_textw160" type="text" name="cpm_price">	
				</td>
			  </tr>	
			  <tr>
				<td>每日pv限额：</td>
				<td class="textbox_td">
					<input class="newsite_textw160" type="text" name="max_pv_one_day" value="0"> 0为不限制
				</td>
			  </tr>	
			  <tr>
				<td>总pv限额：</td>
				<td class="textbox_td">
					<input class="newsite_textw160" type="text" name="max_pv" value="0"> 0为不限制
				</td>
			  </tr>
			  </tbody>
			  
			  <tbody id="cpc" class="price" style="display:none;">
			  <tr>
				<td>价格：</td>
				<td class="textbox_td">
					<input class="newsite_textw160" type="text" name="cpc_price">	
				</td>
			  </tr>			  
			  <tr>
				<td>每日pv限额：</td>
				<td class="textbox_td">
					<input class="newsite_textw160" type="text" name="max_pv_one_day" value="0"> 0为不限制
				</td>
			  </tr>	
			  <tr>
				<td>总pv限额：</td>
				<td class="textbox_td">
					<input class="newsite_textw160" type="text" name="max_pv" value="0"> 0为不限制
				</td>
			  </tr>
	</tbody>
          <tbody><tr>
        	<td class="newsite_w155">计划介绍：</td>
        	<td class="textbox_td">
        		<textarea rows="5" cols="80" class="site_about" name="description"></textarea>
        	</td>
          </tr>	
</tbody></table>

<script>
$("select[name='pay_type']").change(
		function(){
			var pay_type = $(this).val();
			$(".price").hide();
			$("#"+pay_type).show();
		}
);

// add cps price
var price_html = '<tr class="cps_price_tr">';
	price_html += '<td style="width:20%"><input type="text" name="cps_category_id[]" /></td>';
	price_html += '<td style="width:20%"><input type="text" name="cps_category_name[]" /></td>';
	price_html += '<td style="width:20%"><input type="text" name="cps_real_price[]" style="width:50px" /> %</td>';
	price_html += '<td style="width:20%"><input type="text" name="cps_remark[]" /></td>';
	price_html += '<td style="width:20%">';
	price_html += '<input type="hidden" name="is_step[]" value="0" />';
	price_html += '<a class="add_price">添加一项 </a>|';
	price_html += '<a class="add_step">阶梯价格</a>|';
	price_html += '<a class="remove_price">移除</a>';
	price_html += '</td>';
	price_html += '</tr> ';
$(".add_price").live('click',
	    function(){
		    $(this).parent().parent().parent().append(price_html);
	    }
);

$(".remove_price").live('click',
	    function(){
		    $(this).parent().parent().remove();
	    }
);

function returnDate1(pay_type){
	var span_id = '#'+pay_type+'_return_date_span';
	$(span_id).hide();
	$("input[name='"+pay_type+"_data_return']").val("0");
}

function returnDate2(pay_type){
	var span_id = '#'+pay_type+'_return_date_span';
	$("input[name='"+pay_type+"_data_return']").val("");
	$(span_id).show();
}

// step price TD html
$(".add_step").live('click',
function(){
	var price_index = $(this).parent().parent().index(".cps_price_tr");
	var step_price_html = '<tr><td>阶梯类型：<select name="cps_step_type[' + price_index + '][]"><option value="pv">当日PV</option></td>';
	step_price_html += '<td>起始：<input type="text" name="cps_step_start[' + price_index + '][]" style="width:80px" /></td>';
	step_price_html += '<td>结束：<input type="text" name="cps_step_end[' + price_index + '][]" style="width:80px" /></td>';
	step_price_html += '<td>价格：<input type="text" name="cps_step_real_price[' + price_index + '][]" style="width:80px" />%</td>';
	step_price_html += '<td><a class="remove_step">移除</a></td></tr>';

	$(this).parent().parent().after(step_price_html);
	$(this).parent().parent().prev();
    $(this).prev().prev().val('1');
}
);

$(".remove_step").live('click',
	    function(){
    $(this).parent().parent().remove();
}
);
</script>              

<table align="center">
    <tbody><tr>
    <td colspan="2" align="center">
        <input class="confirm_btn" type="submit" value="">
		<input class="back_btn" type="button" onclick="javascript:history.back(-1);">
	</td>
    </tr>
</tbody></table>
</form>

</div>
</div>

</body></html>